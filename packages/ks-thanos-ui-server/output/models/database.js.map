{"version":3,"sources":["../../src/models/database.js"],"names":["Database","constructor","host","port","dbName","db","undefined","initDatabase","Promise","resolve","url","client","MongoClient","connect","useNewUrlParser","err","getDB"],"mappings":";;;;;;;AAAA;;AAEe,MAAMA,QAAN,CAAe;AAC1BC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA;AAAd,GAAD,EAAyB;AAChC,SAAKF,IAAL,GAAYA,IAAZ;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,EAAL,GAAUC,SAAV;AACH;;AAED,QAAMC,YAAN,GAAqB;AACjB,QAAI,KAAKF,EAAT,EAAa;AACT,aAAOG,OAAO,CAACC,OAAR,CAAgB,KAAKJ,EAArB,CAAP;AACH;;AACD,UAAMK,GAAG,GAAI,GAAE,KAAKR,IAAK,IAAG,KAAKC,IAAK,EAAtC;;AACA,QAAI;AACA,YAAMQ,MAAM,GAAG,MAAMC,qBAAYC,OAAZ,CAAoBH,GAApB,EAAyB;AAAEI,QAAAA,eAAe,EAAE;AAAnB,OAAzB,CAArB;AACA,WAAKT,EAAL,GAAUM,MAAM,CAACN,EAAP,CAAU,KAAKD,MAAf,CAAV;AACA,aAAO,KAAKC,EAAZ;AACH,KAJD,CAIE,OAAOU,GAAP,EAAY;AACV,YAAMA,GAAN;AACH;AACJ;;AAEDC,EAAAA,KAAK,GAAG;AACJ,WAAO,KAAKX,EAAZ;AACH;;AAxByB","sourcesContent":["import { MongoClient } from 'mongodb';\n\nexport default class Database {\n    constructor({ host, port, dbName }) {\n        this.host = host;\n        this.port = port;\n        this.dbName = dbName;\n        this.db = undefined;\n    }\n\n    async initDatabase() {\n        if (this.db) {\n            return Promise.resolve(this.db);\n        }\n        const url = `${this.host}:${this.port}`;\n        try {\n            const client = await MongoClient.connect(url, { useNewUrlParser: true });\n            this.db = client.db(this.dbName);\n            return this.db;\n        } catch (err) {\n            throw err;\n        }\n    };\n\n    getDB() {\n        return this.db;\n    }\n}\n"],"file":"database.js"}