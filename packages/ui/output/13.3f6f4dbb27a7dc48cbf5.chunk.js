(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{2833:function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STATE=void 0;var r=n(a(137)),c=n(a(162)),o=n(a(96));a(469);var u=n(a(226)),s=n(a(301)),i=n(a(479)),d=a(225),f=n(a(481)),l=a(2878),p={currentProject:{},projectProcess:{},cwd:"",projectConfig:{},thanosModalVisible:!1,initPageName:"",thanosGeneratorLoading:!1,localNginxEnv:""};t.STATE=p;var m={namespace:"workspace",initialState:p,effects:{runNpmCommand:function(e,t){var a=t().workspace.cwd;return i.default.getData({api:"runNpmCommand",method:"GET",params:{command:e,cwd:a}})},clear:function(){f.default.write("\r\n"),f.default.clear()},initProject:function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getData({api:"thanos",method:"GET",params:t});case 2:0===e.sent.code&&(u.default.success("\u9879\u76ee\u521d\u59cb\u5316\u4e2d\u8bf7\u7a0d\u7b49"),d.actions.homepage.setReducers({initModalVisible:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getProjectProcess:function(){var e=(0,s.default)(o.default.mark((function e(t,a){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().workspace.cwd,e.next=3,i.default.getData({api:"getProjectProcess",method:"GET",params:{cwd:n}});case 3:(r=e.sent)&&0===r.code&&d.actions.workspace.setReducers({projectProcess:r.result});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getProjectConfig:function(){var e=(0,s.default)(o.default.mark((function e(t,a){var n,r,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().workspace.cwd,e.next=3,i.default.getData({api:"getProjectConfig",method:"GET",params:{cwd:n}});case 3:(r=e.sent)&&0===r.code&&(d.actions.workspace.setReducers({projectConfig:r.result}),(c=r.result.nginxPort)&&d.actions.workspace.getNginxEnv({cwd:n,cmd:"cv",args:JSON.stringify([{key:"--config",value:{action:"get",port:c}}]),callback:function(){}}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),updateProjectConfig:function(){var e=(0,s.default)(o.default.mark((function e(t,a){var n,u,s,f,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().workspace.cwd,u=t.form,s=(0,c.default)(t,["form"]),e.next=4,i.default.getData({api:"updateProjectConfig",method:"post",params:(0,r.default)({cwd:n},s)});case 4:if(!(f=e.sent)||0!==f.code){e.next=10;break}return e.next=8,d.actions.workspace.getProjectConfig();case 8:l=a().global.projectConfig,u.setFieldsValue(l);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),thanosSync:function(){var e=(0,s.default)(o.default.mark((function e(t){var a,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.callback,n=(0,c.default)(t,["callback"]),e.next=3,i.default.getData({api:"thanosSync",method:"post",params:n});case 3:(r=e.sent)&&0===r.code&&(d.actions.workspace.setReducers({thanosResponse:r.data}),a());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getNginxEnv:function(){var e=(0,s.default)(o.default.mark((function e(t){var a,n,r,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.callback,n=(0,c.default)(t,["callback"]),e.next=3,i.default.getData({api:"thanosSync",method:"post",params:n});case 3:(r=e.sent)&&0===r.code&&(u=r.data||[],(u=l.NGINX_ENV.find((function(e){return u.includes(e)})))&&(d.actions.workspace.setReducers({localNginxEnv:u}),a()));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleAudioPlay:function(){var e=(0,s.default)(o.default.mark((function e(t){var a,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=document.getElementById("audio"),n=t.audioUrl,a&&(a.src=n),null===a||void 0===a||a.play();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};t.default=m},2878:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NGINX_ENV=t.PROJECT_PROCESS_TYPE=void 0;t.PROJECT_PROCESS_TYPE=[{key:"not_run",name:"\u672a\u8fd0\u884c"},{key:"running",name:"\u8fd0\u884c\u4e2d"},{key:"finish",name:"\u542f\u52a8\u6210\u529f"},{key:"fail",name:"\u542f\u52a8\u5931\u8d25"}];t.NGINX_ENV=["Dev","Test","Gamma"]}}]);