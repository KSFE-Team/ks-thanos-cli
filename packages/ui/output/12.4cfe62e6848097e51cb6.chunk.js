(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{2820:function(e,a,t){"use strict";var n=t(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.STATE=void 0;var o=n(t(5)),u=n(t(96));t(2681);var r=n(t(2682));t(469);var l=n(t(226)),c=n(t(137)),m=n(t(301)),i=n(t(474)),s=t(228),p=t(475),v=t(225),d=t(227),f=t(2851),g={selectedId:"",pageJson:{pageName:"",paramKey:"",components:[]},editorInitComponents:[],editorInitFormConfig:{},editorInitPage:{},undoStack:[],redoStack:[]};a.STATE=g;var E={namespace:"page",initialState:g,effects:{save:function(){var e=(0,m.default)(u.default.mark((function e(a){var t,n,o,m;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.pageOrTemp,n=a.postDate,e.prev=1,e.next=4,(0,i.default)(s.API[t].addOrUpdate,{method:"post",body:(0,c.default)({},n)});case 4:(o=e.sent)&&0===o.errcode&&(m=n.id?"\u4fee\u6539":"\u65b0\u589e","template"===t?(l.default.success("".concat(m,"\u6a21\u677f\u914d\u7f6e\u6210\u529f")),r.default.confirm({title:"\u662f\u5426\u524d\u5f80\u6a21\u677f\u5217\u8868\u67e5\u770b",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){d.goto.push("/workspace/blocks/tempLateMgt")}})):(l.default.success("".concat(m,"\u9875\u9762\u914d\u7f6e\u6210\u529f")),d.goto.go(-1))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l.default.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}(),getTemplateItem:function(){var e=(0,m.default)(u.default.mark((function e(a){var t,n,r,l,c,m,p;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.pageOrTemp,n=a.pageName,e.next=3,(0,i.default)(s.API[t].get,{method:"GET",body:(0,o.default)({},"".concat(t,"Name"),n)});case 3:(r=e.sent)&&!r.errcode&&(l=r.result,c=JSON.parse(l["".concat(t,"Data")]),m=c.components,p=c.paramKey,v.actions.page.setReducers({pageJson:{pageName:"page"===t?l["".concat(t,"Name")]:"",paramKey:l.paramKey||p,components:"RelationTable"===m[0].componentName?m[0].components:m},editorInitComponents:JSON.parse(JSON.stringify(m)),editorInitPage:{pageName:"page"===t?l["".concat(t,"Name")]:"",paramKey:l.paramKey||p}}),v.actions.page.setItemProperty(JSON.parse(l["".concat(t,"Data")])));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),setItemProperty:function(e){var a=e.components,t=(0,f.getComponents)();a.forEach((function(e){var a=e.id,n=e.components,u=e.componentName,r=t[u].tools.reCode,l=e;r&&(l=r(e)),v.actions[a].setReducers(l);var c=(0,p.getApp)()._store.getState().page.editorInitFormConfig;v.actions.page.setReducers({editorInitFormConfig:Object.assign(c,(0,o.default)({},a,l))}),n&&n.length>0&&v.actions.page.setItemProperty(e)}))}}};a.default=E},2851:function(e,a,t){"use strict";var n=t(1);Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_OPTIONS=a.FIELD_DICT=a.ALIAS=a.BOOLEAN_TYPE=a.ISREQUIRED_TYPE=a.FORMITEM_LAYOUT=a.ONLYCOMPONENT=a.ACTION=a.getBizComponents=a.getContentComponents=a.getBasicComponents=a.getContainerComponents=a.getComponents=a.setComponents=a.componentsMap=a.initialState=void 0;var o=n(t(17)),u=n(t(137)),r=n(t(2879));a.initialState={};var l={};a.componentsMap=l;a.setComponents=function(e,a){var t=(0,u.default)((0,u.default)({},a),{},{component:(0,r.default)(a.component,a,!0),config:(0,r.default)(a.config,a,!1)});l[e]=t};a.getComponents=function(){return l};a.getContainerComponents=function(){return c("container")};a.getBasicComponents=function(){return c("basic")};a.getContentComponents=function(){return c("content")};a.getBizComponents=function(){return c("biz")};var c=function(e){return Object.keys(l).reduce((function(a,t){var n=(0,l[t].tools.getTools)();return n.groupType===e?[].concat((0,o.default)(a),[n]):a}),[])};a.ACTION={ADD:"ADD",UPDATE:"UPDATE",DELETE:"DELETE"};a.ONLYCOMPONENT=["Form","Table","relationTable"];a.FORMITEM_LAYOUT={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};a.ISREQUIRED_TYPE=[{VALUE:!0,LABEL:"\u5fc5\u586b"},{VALUE:!1,LABEL:"\u975e\u5fc5\u586b"}];a.BOOLEAN_TYPE=[{VALUE:!0,LABEL:"true"},{VALUE:!1,LABEL:"false"}];a.ALIAS={KEY:"\u8868\u5355\u7ed1\u5b9aKey",LABEL:"\u8868\u5355\u5c55\u793aLabel",PLACEHOLDER:"Placeholder",DATE_FORMAT:"\u65e5\u671f\u683c\u5f0f",SHOW_TIME:"\u662f\u5426\u6709\u9009\u62e9\u65f6\u95f4\u529f\u80fd",TIME_FORMAT:"\u65f6\u95f4\u683c\u5f0f",TYPE:"\u7c7b\u578b",ISREQUIRED:"\u662f\u5426\u5fc5\u586b",DEFAULTVALUE:"\u9ed8\u8ba4\u503c"};a.FIELD_DICT={KEY:"key",LABEL:"label",ISREQUIRED:"isRequired",TYPE:"type"};a.DEFAULT_OPTIONS=[{value:"activity",name:"\u6d3b\u52a8\u6a21\u677f\u5217\u8868"},{value:"adPicture",name:"\u7d20\u6750\u56fe\u7247"},{value:"adAudio",name:"\u5e7f\u544a\u97f3\u9891"},{value:"album",name:"\u4e13\u8f91"},{value:"applePayProduct",name:"\u82f9\u679c\u652f\u4ed8\u5546\u54c1"},{value:"appleProduct",name:"\u82f9\u679c\u5546\u54c1"},{value:"applets",name:"\u5c0f\u7a0b\u5e8f"},{value:"attribute",name:"\u5916\u90e8\u5c5e\u6027\uff5c\u89c4\u683c"},{value:"bubble",name:"\u6c14\u6ce1\uff5c\u5934\u9970\uff5c\u5934\u50cf"},{value:"adPosition",name:"\u5e7f\u544a\u4f4d"},{value:"camp",name:"\u8bad\u7ec3\u8425"},{value:"campCourse",name:"\u8bad\u7ec3\u8425\u8bfe\u7a0b"},{value:"campStage",name:"\u8bad\u7ec3\u8425\u5206\u671f"},{value:"campLabel",name:"\u8bad\u7ec3\u8425\u6807\u7b7e"},{value:"contentPack",name:"\u5185\u5bb9\u793c\u5305"},{value:"coupon",name:"\u4f18\u60e0\u5238"},{value:"column",name:"\u5c0f\u77e5\u8bc6"},{value:"discountSuit",name:"\u4f18\u60e0\u5957\u88c5"},{value:"doc",name:"\u6587\u6848\u5e93"},{value:"entityTuan",name:"\u5b9e\u7269\u62fc\u56e2"},{value:"feedback",name:"\u5b66\u4e60\u53cd\u9988\u8bfe\u7a0b"},{value:"file",name:"\u9644\u4ef6"},{value:"fontMgt",name:"\u5b57\u4f53\u5e93"},{value:"giftPackage",name:"\u793c\u5305"},{value:"guideAttention",name:"\u5f15\u5bfc\u516c\u4f17\u53f7\u914d\u7f6e"},{value:"iosBuyProduct",name:"ios\u5185\u8d2d\u4e70\u5546\u54c1"},{value:"ipRole",name:"IP\u4eba\u7269"},{value:"knowledge",name:"\u6545\u4e8b\u5c0f\u77e5\u8bc6"},{value:"lexicon",name:"\u9898\u5e93\u7cfb\u7edf \u8bcd\u5e93"},{value:"live",name:"\u76f4\u64ad\u7ba1\u7406"},{value:"mallProduct",name:"\u81ea\u5efa\u5546\u54c1"},{value:"merchant",name:"\u5546\u6237"},{value:"newAlbum",name:"\u65b0\u4e13\u8f91"},{value:"newLabel",name:"\u65b0\u6807\u7b7e\u7cfb\u7edf"},{value:"newUserTask",name:"\u65b0\u7528\u6237\u793c\u5305"},{value:"newContent",name:"\u65b0APP\u5185\u5bb9\u5217\u8868\uff0c\u97f3\u9891\u3001\u89c6\u9891\u6545\u4e8b"},{value:"panguProduct",name:"\u76d8\u53e4\u5546\u54c1"},{value:"previewStory",name:"\u8bd5\u542c\u6545\u4e8b"},{value:"product",name:"\u5546\u54c1"},{value:"payMethod",name:"\u652f\u4ed8\u65b9\u5f0f"},{value:"plot",name:"\u5267\u60c5"},{value:"plotLine",name:"\u5267\u60c5\u7ebf"},{value:"question",name:"\u9898\u5e93\u9898\u76ee"},{value:"special",name:"\u4e13\u9898"},{value:"story",name:"\u6545\u4e8b"},{value:"storyArticle",name:"\u6545\u4e8b\u6587\u7a3f"},{value:"standardCard",name:"\u6807\u51c6\u4f1a\u5458\u5361"},{value:"studyReport",name:"\u5b66\u4e60\u62a5\u544a"},{value:"sudokuOption",name:"\u6570\u72ec\u9009\u9879"},{value:"suit",name:"\u4f18\u60e0\u5957\u88c5"},{value:"subChannel",name:"\u5b50\u9891\u9053"},{value:"usr",name:"\u7528\u6237"},{value:"tag",name:"\u6807\u7b7e"},{value:"vipCard",name:"\u4f1a\u5458\u5361"},{value:"userGroup",name:"\u7528\u6237\u7ec4"},{value:"userHierarchy",name:"\u7528\u6237\u5206\u5c42"},{value:"testUser",name:"\u6d4b\u8bd5\u4eba\u5458"},{value:"promotion",name:"\u767d\u572d\u4fc3\u9500\u5546\u54c1"},{value:"attrbute",name:"pms\u5c5e\u6027\u3001\u89c4\u683c"},{value:"outAttrbute",name:"\u5916\u90e8\u5c5e\u6027\u3001\u89c4\u683c"},{value:"outAttrbuteValue",name:"\u5916\u90e8\u5c5e\u6027\u503c\u3001\u89c4\u683c\u503c"},{value:"virtualMedal",name:"\u52cb\u7ae0"},{value:"task",name:"\u4efb\u52a1"},{value:"warehouse",name:"\u4ed3\u5e93\u5217\u8868"},{value:"resourcePack",name:"\u8d44\u6e90\u5305"},{value:"newAudioStory",name:"\u97f3\u9891\u6545\u4e8b"},{value:"newVideoStory",name:"\u89c6\u9891\u6545\u4e8b"},{value:"newAudioAlbum",name:"\u97f3\u9891\u4e13\u8f91"},{value:"newVideoAlbum",name:"\u89c6\u9891\u4e13\u8f91"},{value:"content",name:"\u5355\u4e2a\u5185\u5bb9"}]},2879:function(e,a,t){"use strict";var n=t(2),o=t(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=o(t(9)),r=o(t(137)),l=o(t(5)),c=n(t(0)),m=t(225),i=t(475),s=function(e,a,t,n){return function(e,a){if(!(e in m.actions)){var t=(0,i.getApp)(),n=a.tools.getInitJson;t.model({namespace:e,initialState:n()})}}(e,n),(0,l.default)({},e,(0,m.connect)((function(a){var n=(0,l.default)({},e,a[e]);return t&&(n=(0,r.default)((0,r.default)({},n),{},{page:a.page})),n}))(a))};a.default=function(e,a,t){return function(n){var o=n.id,l=(0,c.useState)((function(){return s(o,e,t,a)})),m=(0,u.default)(l,2),i=m[0],p=m[1];if((0,c.useEffect)((function(){p((function(n){return(0,r.default)((0,r.default)({},n),s(o,e,t,a))}))}),[o]),o){var v=i[o];return v?c.default.createElement(v,n):null}return c.default.createElement("div",null)}}}}]);