(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{2878:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NGINX_ENV=n.PROJECT_PROCESS_TYPE=void 0;n.PROJECT_PROCESS_TYPE=[{key:"not_run",name:"\u672a\u8fd0\u884c"},{key:"running",name:"\u8fd0\u884c\u4e2d"},{key:"finish",name:"\u542f\u52a8\u6210\u529f"},{key:"fail",name:"\u542f\u52a8\u5931\u8d25"}];n.NGINX_ENV=["Dev","Test","Gamma"]},3002:function(e,n,a){"use strict";var t=a(2),o=a(1);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,a(472);var i=o(a(302));a(2839);var r=o(a(2845));a(478);var s=o(a(165)),c=o(a(4));a(2819);var l=o(a(109)),u=o(a(17));a(113);var d=o(a(48));a(469);var p=o(a(226)),g=o(a(9));a(2681);var f=o(a(2682)),k=t(a(0)),m=a(2680),w=a(300),v=a(2840),E=a(225),x=o(a(481)),y=o(a(2895)),b=a(2878);a(3007);var N=f.default.confirm,C=(0,g.default)(b.PROJECT_PROCESS_TYPE,4),P=C[0].key,_=C[1].key,S=C[2].key,h=C[3].key;n.default=function(){var e=(0,w.useSelector)((function(e){return{workspace:e.workspace,loading:e.loading.effects["workspace/getProjectProcess"]||e.loading.effects["workspace/thanosSync"]||e.loading.effects["workspace/getNginxEnv"]||!1}})),n=e.workspace,a=e.loading,t=n.currentProject,o=n.thanosGeneratorLoading,f=n.thanosModalVisible,C=n.projectConfig,O=n.cwd,R=n.localNginxEnv,T=C.openUrl,j=C.nginxPort,J=(0,k.useState)("Dev"),G=(0,g.default)(J,2),I=G[0],V=G[1];(0,k.useEffect)((function(){var e=new v.FitAddon,n=document.querySelector("#terminal");x.default.loadAddon(e),x.default.open(n),e.fit(),E.actions.workspace.getProjectProcess(),E.actions.workspace.getProjectConfig()}),[]),(0,k.useEffect)((function(){V(R)}),[R]);var z=function(){E.actions.workspace.runNpmCommand("start")},M=function(){E.actions.workspace.runNpmCommand("stop")},X=function(){E.actions.workspace.clear()},Y=function(){E.actions.global.setReducers({currentPath:"".concat(t.path,"/src/pages")}),E.actions.workspace.setReducers({thanosModalVisible:!0})},A=function(e){var n=e.key;n!==I&&(E.actions.workspace.setReducers({localNginxEnv:n}),E.actions.workspace.thanosSync({cwd:O,cmd:"cv",args:JSON.stringify([{key:"--config",value:{action:"set",port:j,env:n}}]),callback:function(){p.default.success("\u5207\u6362nginx\u73af\u5883\u6210\u529f")}}))},D=function(){N({title:"\u540c\u6b65nginx\u914d\u7f6e",icon:k.default.createElement(m.ExclamationCircleOutlined,null),content:"\u540c\u6b65\u7ebf\u4e0a\u914d\u7f6e\u5230\u672c\u5730\uff0c\u5e76\u5e2e\u60a8\u81ea\u52a8\u91cd\u542f\uff0c\u786e\u8ba4\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){E.actions.workspace.thanosSync({cwd:O,cmd:"mn",args:"",callback:function(){p.default.success("\u540c\u6b65nginx\u914d\u7f6e\u5e76\u91cd\u542f\u6210\u529f"),E.actions.workspace.getNginxEnv({cwd:O,cmd:"cv",args:JSON.stringify([{key:"--config",value:{action:"get",port:j}}]),callback:function(){}})}})}})};return k.default.createElement("div",{className:"workspace-running-container"},k.default.createElement("div",{className:"workspace-running-tools"},function(){var e=n.projectProcess.status,t=[],o={status:void 0,text:""};switch(void 0===e?P:e){case P:o={status:"default",text:"\u5f85\u8fd0\u884c"},t=[{type:"primary",onClick:z,text:"\u542f\u52a8"}];break;case h:o={status:"error",text:"\u8fd0\u884c\u5931\u8d25"},t=[{type:"primary",onClick:z,text:"\u542f\u52a8"}];break;case _:o={status:"processing",text:k.default.createElement("span",{className:"workspace-running-badge-processing"},"\u8fd0\u884c\u4e2d",k.default.createElement("span",{className:"workspace-running-badge-processing-loading1"},"."),k.default.createElement("span",{className:"workspace-running-badge-processing-loading2"},"."),k.default.createElement("span",{className:"workspace-running-badge-processing-loading3"},"."))},t=[{type:"primary",onClick:M,text:"\u505c\u6b62",props:{danger:!0}}];break;case S:o={status:"success",text:k.default.createElement("span",null,"\u8fd0\u884c\u6210\u529f",k.default.createElement(d.default,{type:"link",className:"workspace-running-text-link",onClick:function(){window.open(T)}},T))},t=[{type:"primary",onClick:M,text:"\u505c\u6b62",props:{danger:!0}}]}t=[].concat((0,u.default)(t),[{onClick:X,text:"\u6e05\u7a7a\u65e5\u5fd7"},{onClick:Y,text:"\u706d\u9738"},{onClick:D,text:"\u540c\u6b65nginx"}]);var p=k.default.createElement(l.default,{onClick:A},b.NGINX_ENV.map((function(e){return k.default.createElement(l.default.Item,{key:e},e)})));return k.default.createElement(i.default,{spinning:a},t.map((function(e,n){var a=e.type,t=e.onClick,o=e.text,i=e.props,r=void 0===i?{}:i;return k.default.createElement(d.default,(0,c.default)({className:"mar-l-4",type:a,key:"".concat(n,"_").concat(a),onClick:t},r),o)})),R&&k.default.createElement("div",{className:"mar-l-4",style:{display:"inline-block"}},k.default.createElement(s.default.Button,{overlay:p},I)),k.default.createElement("span",{className:"workspace-running-badge"},k.default.createElement(r.default,{status:o.status})," ",o.text))}(),o?k.default.createElement("span",{className:"workspace-running-generator-loading"},"\u4ee3\u7801\u751f\u6210\u4e2d ",k.default.createElement(m.LoadingOutlined,{className:"mar-l-4"})):null),k.default.createElement("div",{id:"terminal"}),f&&k.default.createElement(y.default,null))}},3007:function(e,n,a){var t=a(3008);"string"===typeof t&&(t=[[e.i,t,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(21)(t,o);t.locals&&(e.exports=t.locals)},3008:function(e,n,a){(e.exports=a(20)(!1)).push([e.i,".workspace-running-container{padding:30px}.workspace-running-container .workspace-running-tools .workspace-running-badge{margin-left:16px}.workspace-running-container .workspace-running-tools .workspace-running-badge .workspace-running-text-link{-webkit-text-decoration-line:underline;-moz-text-decoration-line:underline;text-decoration-line:underline;margin-left:4px}.workspace-running-container .workspace-running-tools .workspace-running-badge .workspace-running-badge-processing .workspace-running-badge-processing-loading1{-webkit-animation:process-loading1 1s infinite;-moz-animation:process-loading1 1s infinite;-o-animation:process-loading1 1s infinite;animation:process-loading1 1s infinite}.workspace-running-container .workspace-running-tools .workspace-running-badge .workspace-running-badge-processing .workspace-running-badge-processing-loading2{-webkit-animation:process-loading2 1s infinite;-moz-animation:process-loading2 1s infinite;-o-animation:process-loading2 1s infinite;animation:process-loading2 1s infinite}.workspace-running-container .workspace-running-tools .workspace-running-badge .workspace-running-badge-processing .workspace-running-badge-processing-loading3{-webkit-animation:process-loading3 1s infinite;-moz-animation:process-loading3 1s infinite;-o-animation:process-loading3 1s infinite;animation:process-loading3 1s infinite}.workspace-running-container .workspace-running-tools .workspace-running-generator-loading{margin-left:16px;color:#faad14}.workspace-running-container #terminal{margin-top:10px}@-webkit-keyframes process-loading2{0%{color:transparent}}@-webkit-keyframes process-loading3{0%{color:transparent}50%{color:transparent}}",""])}}]);